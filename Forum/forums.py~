from flask import Blueprint, request
from common.DB_connect import *
from common.helpers import check_data 
from api.entities.forums import *

import json
import MySQLdb

forum = Blueprint('forum', __name__)
BASE_URL = '/forum'
@forum.route(BASE_URL + '/create/', methods = ['POST'])
def create():
    print("create!")
    con = connect()
    content = request.json
    required_data = ["name", "short_name", "user"]
    try:
        check_data(data=content, required=required_data)
        forum = forums.save_forum(connect=con,name=content["name"], short_name= content["short_name"], user=content["user"])
    except Exception as e:
        con.close()
        print("error")
        return json.dumps({"code": 1, "response": (e.message)})
    con.close()
    return json.dump({"code": 0, "response": forum})

