__author__ = 'AS'
from common import DB_connect



def save_user(connect, username, about, name, email, optional):
    isAnonim = 0;
    if "isAnonymous" in optional:
        isAnonim = optional["isAnonymous"]
    str = DB_connect.update_query(connect,
                'INSERT INTO user (email, about, name, username, isAnonymous) VALUES (%s, %s, %s, %s, %s)', 
                (email, about, name, username, isAnonim, ))
    if str == "Exist":
        print("raised")
        raise Exception("5")
    user = DB_connect.select_query(connect, 'Select  email, about, id, isAnonymous, name, username FROM user WHERE email = %s', (email, ) )
    print("xa3")
    return user_description(user)

def user_description(user):
    user = user[0]
    response = {
        'about': user[1],
        'email': user[0],
        'id': user[2],
        'isAnonimous': user[3],
        'name': user[4],
        'username': user[5]
    }
    print(response)
    return response
